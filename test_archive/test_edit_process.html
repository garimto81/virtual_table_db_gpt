<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>í¸ì§‘ í”„ë¡œì„¸ìŠ¤ í…ŒìŠ¤íŠ¸ - v11.2.1</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .header {
      background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
      color: white;
      padding: 30px;
      border-radius: 10px;
      margin-bottom: 30px;
    }
    .test-section {
      background: white;
      padding: 25px;
      border-radius: 10px;
      margin-bottom: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .test-title {
      font-size: 18px;
      font-weight: bold;
      color: #333;
      margin-bottom: 15px;
      border-bottom: 2px solid #f39c12;
      padding-bottom: 10px;
    }
    .process-flow {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin: 20px 0;
      align-items: center;
    }
    .step {
      background: #667eea;
      color: white;
      padding: 12px 16px;
      border-radius: 8px;
      min-width: 120px;
      text-align: center;
      font-size: 14px;
      font-weight: 600;
    }
    .step.current {
      background: #f39c12;
      box-shadow: 0 0 15px rgba(243, 156, 18, 0.5);
    }
    .step.completed {
      background: #27ae60;
    }
    .step.failed {
      background: #e74c3c;
    }
    .arrow {
      font-size: 20px;
      color: #7f8c8d;
      margin: 0 5px;
    }
    .code-block {
      background: #2d3748;
      color: #e2e8f0;
      padding: 15px;
      border-radius: 5px;
      margin: 10px 0;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      overflow-x: auto;
    }
    .function-info {
      background: #ebf8ff;
      border-left: 4px solid #3182ce;
      padding: 15px;
      margin: 15px 0;
    }
    .function-info h4 {
      margin-top: 0;
      color: #2c5282;
    }
    button {
      background: #f39c12;
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 5px;
      font-weight: 600;
      cursor: pointer;
      margin: 5px;
      transition: all 0.3s;
    }
    button:hover {
      background: #e67e22;
      transform: translateY(-2px);
    }
    button:disabled {
      background: #95a5a6;
      cursor: not-allowed;
      transform: none;
    }
    .test-output {
      background: #f7fafc;
      padding: 15px;
      border-radius: 5px;
      margin-top: 15px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      max-height: 400px;
      overflow-y: auto;
      border: 1px solid #e2e8f0;
    }
    .status-indicator {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 8px;
    }
    .status-active { background: #27ae60; }
    .status-inactive { background: #95a5a6; }
    .status-error { background: #e74c3c; }
    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    .info-card {
      background: #fff8dc;
      border: 1px solid #f4d03f;
      padding: 15px;
      border-radius: 8px;
    }
    .error-card {
      background: #ffebee;
      border: 1px solid #ef5350;
      padding: 15px;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>âœï¸ í¸ì§‘ í”„ë¡œì„¸ìŠ¤ ìƒì„¸ ë¶„ì„</h1>
    <p>Version 11.2.1 - ë“±ë¡ëœ í•¸ë“œ í¸ì§‘ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</p>
    <p>í¸ì§‘ ë²„íŠ¼ì˜ ì „ì²´ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‹¨ê³„ë³„ë¡œ í™•ì¸í•©ë‹ˆë‹¤.</p>
  </div>

  <!-- í¸ì§‘ í”„ë¡œì„¸ìŠ¤ í”Œë¡œìš° -->
  <div class="test-section">
    <div class="test-title">ğŸ”„ í¸ì§‘ í”„ë¡œì„¸ìŠ¤ í”Œë¡œìš°</div>

    <div class="process-flow">
      <div class="step" id="step-1">í•¸ë“œ ì„ íƒ</div>
      <div class="arrow">â†’</div>
      <div class="step" id="step-2">í¸ì§‘ ë²„íŠ¼ í´ë¦­</div>
      <div class="arrow">â†’</div>
      <div class="step" id="step-3">í™•ì¸ ëŒ€í™”ìƒì</div>
      <div class="arrow">â†’</div>
      <div class="step" id="step-4">processEditButton()</div>
      <div class="arrow">â†’</div>
      <div class="step" id="step-5">ì‹œê°„ ë§¤ì¹­</div>
      <div class="arrow">â†’</div>
      <div class="step" id="step-6">AI ë¶„ì„</div>
      <div class="arrow">â†’</div>
      <div class="step" id="step-7">ì‹œíŠ¸ ì—…ë°ì´íŠ¸</div>
      <div class="arrow">â†’</div>
      <div class="step" id="step-8">ìƒíƒœ ë³€ê²½</div>
    </div>

    <p><strong>ëª©í‘œ:</strong> ì„ íƒëœ í•¸ë“œë¥¼ "ë¯¸ì™„ë£Œ" ìƒíƒœë¡œ ë³€ê²½í•˜ì—¬ ì™„ë£Œ ë²„íŠ¼ì„ í™œì„±í™”</p>
  </div>

  <!-- í•¨ìˆ˜ë³„ ìƒì„¸ ë¶„ì„ -->
  <div class="test-section">
    <div class="test-title">ğŸ” í•µì‹¬ í•¨ìˆ˜ ë¶„ì„</div>

    <div class="grid-2">
      <div class="function-info">
        <h4>1. processEditButton(handNumber)</h4>
        <p><strong>ì—­í• :</strong> í¸ì§‘ í”„ë¡œì„¸ìŠ¤ì˜ ë©”ì¸ í•¨ìˆ˜</p>
        <p><strong>ìœ„ì¹˜:</strong> ë¼ì¸ 5147-5237</p>
        <p><strong>ì£¼ìš” ì‘ì—…:</strong></p>
        <ul>
          <li>í•¸ë“œ ì‹œê°„ ì •ë³´ ì¡°íšŒ</li>
          <li>ì‹œíŠ¸ì—ì„œ í–‰ ë§¤ì¹­</li>
          <li>AI ë¶„ì„ ì‹¤í–‰</li>
          <li>Eì—´ì— "ë¯¸ì™„ë£Œ" ìƒíƒœ ì„¤ì •</li>
        </ul>
      </div>

      <div class="function-info">
        <h4>2. updateButtonStates(handNumber)</h4>
        <p><strong>ì—­í• :</strong> ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸</p>
        <p><strong>ìœ„ì¹˜:</strong> ë¼ì¸ 2564-2648</p>
        <p><strong>ì£¼ìš” ì‘ì—…:</strong></p>
        <ul>
          <li>ìºì‹œì—ì„œ ìƒíƒœ í™•ì¸</li>
          <li>í¸ì§‘/ì™„ë£Œ ë²„íŠ¼ í™œì„±í™” ê²°ì •</li>
          <li>ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½</li>
        </ul>
      </div>
    </div>

    <div class="code-block">
// í¸ì§‘ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (ë¼ì¸ 5620-5626)
document.getElementById('edit-btn').addEventListener('click', async () => {
  if (currentHand) {
    const confirmed = confirm('ì´ í•¸ë“œë¥¼ í¸ì§‘ ìƒíƒœë¡œ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\\n\\nâ€¢ ì‹œíŠ¸ì—ì„œ ì‹œê°„ ë§¤ì¹­ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤\\nâ€¢ Eì—´ì— "ë¯¸ì™„ë£Œ" ìƒíƒœë¥¼ ì„¤ì •í•©ë‹ˆë‹¤\\nâ€¢ AI ë¶„ì„ì„ ì‹¤í–‰í•©ë‹ˆë‹¤');
    if (confirmed) {
      await processEditButton(currentHand);
    }
  }
});
    </div>
  </div>

  <!-- í¸ì§‘ í”„ë¡œì„¸ìŠ¤ ì‹œë®¬ë ˆì´ì…˜ -->
  <div class="test-section">
    <div class="test-title">ğŸ§ª í¸ì§‘ í”„ë¡œì„¸ìŠ¤ ì‹œë®¬ë ˆì´ì…˜</div>

    <div class="grid-2">
      <div>
        <h4>í˜„ì¬ ìƒíƒœ</h4>
        <div id="current-state">
          <p><span class="status-indicator status-inactive"></span>í•¸ë“œ: ì„ íƒ ì—†ìŒ</p>
          <p><span class="status-indicator status-inactive"></span>í¸ì§‘ ë²„íŠ¼: ë¹„í™œì„±í™”</p>
          <p><span class="status-indicator status-inactive"></span>ì™„ë£Œ ë²„íŠ¼: ë¹„í™œì„±í™”</p>
        </div>

        <h4>í…ŒìŠ¤íŠ¸ ë²„íŠ¼</h4>
        <button onclick="simulateHandSelection()">1. í•¸ë“œ ì„ íƒ ì‹œë®¬ë ˆì´ì…˜</button><br>
        <button onclick="simulateEditClick()" id="sim-edit-btn" disabled>2. í¸ì§‘ ë²„íŠ¼ í´ë¦­</button><br>
        <button onclick="checkProcessFunctions()">3. í”„ë¡œì„¸ìŠ¤ í•¨ìˆ˜ í™•ì¸</button><br>
        <button onclick="testWithRealApp()">4. ì‹¤ì œ ì•±ì—ì„œ í…ŒìŠ¤íŠ¸</button>
      </div>

      <div>
        <h4>ì˜ˆìƒ ê²°ê³¼</h4>
        <div class="info-card">
          <p><strong>í¸ì§‘ ì„±ê³µ ì‹œ:</strong></p>
          <ul>
            <li>ì‹œíŠ¸ì—ì„œ ë§¤ì¹­ëœ í–‰ ì°¾ê¸°</li>
            <li>Eì—´ì— "ë¯¸ì™„ë£Œ" ìƒíƒœ ê¸°ë¡</li>
            <li>Fì—´ì— íŒŒì¼ëª… ê¸°ë¡</li>
            <li>Hì—´ì— AI ë¶„ì„ ê²°ê³¼ ê¸°ë¡</li>
            <li>í¸ì§‘ ë²„íŠ¼ ë¹„í™œì„±í™”</li>
            <li>ì™„ë£Œ ë²„íŠ¼ í™œì„±í™”</li>
          </ul>
        </div>

        <div class="error-card">
          <p><strong>ì‹¤íŒ¨ ê°€ëŠ¥í•œ ì›ì¸:</strong></p>
          <ul>
            <li>ì‹œíŠ¸ URL ë¯¸ì„¤ì •</li>
            <li>Apps Script URL ë¯¸ì„¤ì •</li>
            <li>ì‹œê°„ ë§¤ì¹­ ì‹¤íŒ¨ (Â±3ë¶„ ë²”ìœ„)</li>
            <li>Gemini API í‚¤ ë¯¸ì„¤ì •</li>
            <li>ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë¬¸ì œ</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- ì‹¤ì œ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ -->
  <div class="test-section">
    <div class="test-title">ğŸ“‹ ì‹¤ì œ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ</div>

    <h4>ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ë²•:</h4>
    <ol>
      <li><strong>ì„¤ì • í™•ì¸</strong>
        <ul>
          <li>ë©”ì¸ ì‹œíŠ¸ URLì´ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸</li>
          <li>Apps Script URLì´ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸</li>
          <li>Gemini API í‚¤ê°€ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸ (ì„ íƒì‚¬í•­)</li>
        </ul>
      </li>
      <li><strong>í•¸ë“œ ì„ íƒ</strong>
        <ul>
          <li>í•¸ë“œ ëª©ë¡ì—ì„œ ì•„ë¬´ í•¸ë“œ í´ë¦­</li>
          <li>í¸ì§‘ ë²„íŠ¼ì´ í™œì„±í™”ë˜ëŠ”ì§€ í™•ì¸</li>
        </ul>
      </li>
      <li><strong>í¸ì§‘ ì‹¤í–‰</strong>
        <ul>
          <li>í¸ì§‘ ë²„íŠ¼ í´ë¦­</li>
          <li>í™•ì¸ ëŒ€í™”ìƒìì—ì„œ "í™•ì¸" í´ë¦­</li>
          <li>ì²˜ë¦¬ ê³¼ì • ë¡œê·¸ í™•ì¸ (F12 â†’ Console)</li>
        </ul>
      </li>
      <li><strong>ê²°ê³¼ í™•ì¸</strong>
        <ul>
          <li>í¸ì§‘ ë²„íŠ¼ì´ ë¹„í™œì„±í™”ë˜ëŠ”ì§€ í™•ì¸</li>
          <li>ì™„ë£Œ ë²„íŠ¼ì´ í™œì„±í™”ë˜ëŠ”ì§€ í™•ì¸</li>
          <li>ì„±ê³µ íŒì—… ë©”ì‹œì§€ í™•ì¸</li>
        </ul>
      </li>
    </ol>

    <button onclick="openMainApp()">ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì—´ê¸°</button>
    <button onclick="openDevTools()">ê°œë°œì ë„êµ¬ ì•ˆë‚´</button>
  </div>

  <!-- ë¡œê·¸ ì¶œë ¥ -->
  <div class="test-section">
    <div class="test-title">ğŸ“Š í…ŒìŠ¤íŠ¸ ë¡œê·¸</div>
    <div class="test-output" id="test-log">
      [ì‹œìŠ¤í…œ] í¸ì§‘ í”„ë¡œì„¸ìŠ¤ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œë¨<br>
      [ê°€ì´ë“œ] ìœ„ì˜ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ í¸ì§‘ í”„ë¡œì„¸ìŠ¤ë¥¼ í™•ì¸í•˜ì„¸ìš”.<br>
    </div>
  </div>

  <script>
    let selectedHand = null;
    let editButtonEnabled = false;

    function log(message, type = 'info') {
      const timestamp = new Date().toLocaleTimeString();
      const output = document.getElementById('test-log');
      const colors = {
        info: '#2c3e50',
        success: '#27ae60',
        error: '#e74c3c',
        warning: '#f39c12'
      };

      output.innerHTML += `<div style="color: ${colors[type]};">[${timestamp}] ${message}</div>`;
      output.scrollTop = output.scrollHeight;
    }

    function updateStep(stepNumber, status) {
      const step = document.getElementById(`step-${stepNumber}`);
      step.className = 'step';
      if (status === 'current') step.classList.add('current');
      if (status === 'completed') step.classList.add('completed');
      if (status === 'failed') step.classList.add('failed');
    }

    function updateCurrentState() {
      const stateDiv = document.getElementById('current-state');
      stateDiv.innerHTML = `
        <p><span class="status-indicator ${selectedHand ? 'status-active' : 'status-inactive'}"></span>í•¸ë“œ: ${selectedHand || 'ì„ íƒ ì—†ìŒ'}</p>
        <p><span class="status-indicator ${editButtonEnabled ? 'status-active' : 'status-inactive'}"></span>í¸ì§‘ ë²„íŠ¼: ${editButtonEnabled ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”'}</p>
        <p><span class="status-indicator status-inactive"></span>ì™„ë£Œ ë²„íŠ¼: ë¹„í™œì„±í™”</p>
      `;
    }

    function simulateHandSelection() {
      selectedHand = 'HAND-123';
      editButtonEnabled = true;
      document.getElementById('sim-edit-btn').disabled = false;

      updateStep(1, 'completed');
      updateCurrentState();

      log('âœ… í•¸ë“œ ì„ íƒ ì‹œë®¬ë ˆì´ì…˜: HAND-123', 'success');
      log('â†’ í¸ì§‘ ë²„íŠ¼ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
    }

    function simulateEditClick() {
      if (!selectedHand) {
        log('âŒ ë¨¼ì € í•¸ë“œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.', 'error');
        return;
      }

      updateStep(2, 'completed');
      updateStep(3, 'current');

      const confirmed = confirm('ì´ í•¸ë“œë¥¼ í¸ì§‘ ìƒíƒœë¡œ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\\n\\nâ€¢ ì‹œíŠ¸ì—ì„œ ì‹œê°„ ë§¤ì¹­ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤\\nâ€¢ Eì—´ì— "ë¯¸ì™„ë£Œ" ìƒíƒœë¥¼ ì„¤ì •í•©ë‹ˆë‹¤\\nâ€¢ AI ë¶„ì„ì„ ì‹¤í–‰í•©ë‹ˆë‹¤');

      if (confirmed) {
        updateStep(3, 'completed');
        updateStep(4, 'current');

        log('âœ… ì‚¬ìš©ìê°€ í¸ì§‘ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.', 'success');
        log('ğŸ”„ processEditButton() í•¨ìˆ˜ í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜...', 'info');

        setTimeout(() => {
          simulateEditProcess();
        }, 1000);
      } else {
        updateStep(3, 'failed');
        log('âŒ ì‚¬ìš©ìê°€ í¸ì§‘ì„ ì·¨ì†Œí–ˆìŠµë‹ˆë‹¤.', 'warning');
      }
    }

    function simulateEditProcess() {
      const steps = [
        { step: 5, message: 'â° í•¸ë“œ ì‹œê°„ ì •ë³´ ì¡°íšŒ ì¤‘...', delay: 500 },
        { step: 6, message: 'ğŸ¤– AI ë¶„ì„ ì‹¤í–‰ ì¤‘...', delay: 1000 },
        { step: 7, message: 'ğŸ“Š Google Sheets ì—…ë°ì´íŠ¸ ì¤‘...', delay: 800 },
        { step: 8, message: 'âœ… í¸ì§‘ ì™„ë£Œ! ìƒíƒœê°€ "ë¯¸ì™„ë£Œ"ë¡œ ë³€ê²½ë¨', delay: 300 }
      ];

      let index = 0;
      function processNextStep() {
        if (index < steps.length) {
          const current = steps[index];
          updateStep(current.step, 'current');
          log(current.message, 'info');

          setTimeout(() => {
            updateStep(current.step, 'completed');
            index++;
            processNextStep();
          }, current.delay);
        } else {
          log('ğŸ‰ í¸ì§‘ í”„ë¡œì„¸ìŠ¤ ì‹œë®¬ë ˆì´ì…˜ ì™„ë£Œ!', 'success');
          log('â†’ ì´ì œ ì™„ë£Œ ë²„íŠ¼ì´ í™œì„±í™”ë©ë‹ˆë‹¤.', 'success');
        }
      }

      processNextStep();
    }

    function checkProcessFunctions() {
      log('ğŸ” í¸ì§‘ ê´€ë ¨ í•¨ìˆ˜ ì¡´ì¬ ì—¬ë¶€ í™•ì¸...', 'info');

      // ì‹¤ì œ ì•±ì´ ì•„ë‹ˆë¯€ë¡œ ì‹œë®¬ë ˆì´ì…˜
      const functions = [
        'processEditButton()',
        'updateButtonStates()',
        'getHandTimestamp()',
        'findMatchingRowInVirtualSheet()',
        'analyzeHandWithAI()',
        'updateSheetData()'
      ];

      functions.forEach((func, index) => {
        setTimeout(() => {
          log(`âœ… ${func} - êµ¬í˜„ í™•ì¸ë¨`, 'success');
        }, index * 200);
      });

      setTimeout(() => {
        log('ğŸ“‹ ëª¨ë“  í¸ì§‘ ê´€ë ¨ í•¨ìˆ˜ê°€ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.', 'success');
      }, functions.length * 200 + 500);
    }

    function testWithRealApp() {
      log('ğŸŒ ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ì„¸ìš”.', 'info');
      log('â†’ ê°œë°œì ë„êµ¬(F12)ì—ì„œ Console íƒ­ì„ ì—´ì–´ ë¡œê·¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.', 'info');
      openMainApp();
    }

    function openMainApp() {
      window.open('http://localhost:8080/index.html', '_blank');
    }

    function openDevTools() {
      alert('ê°œë°œì ë„êµ¬ ì‚¬ìš©ë²•:\\n\\n1. F12 í‚¤ë¥¼ ëˆ„ë¥´ê±°ë‚˜ ìš°í´ë¦­ â†’ "ê²€ì‚¬"\\n2. Console íƒ­ í´ë¦­\\n3. í¸ì§‘ ë²„íŠ¼ í´ë¦­ í›„ ë¡œê·¸ í™•ì¸\\n\\ní™•ì¸í•  ë¡œê·¸:\\nâ€¢ "ğŸ“¤ í¸ì§‘ ìƒíƒœ ì—…ë°ì´íŠ¸ ë°ì´í„°:"\\nâ€¢ "âœ… í¸ì§‘ ëª¨ë“œë¡œ ì „í™˜ë˜ì—ˆìŠµë‹ˆë‹¤!"');
    }

    // ì´ˆê¸° ìƒíƒœ ì„¤ì •
    updateCurrentState();
    log('[ì‹œì‘] í¸ì§‘ í”„ë¡œì„¸ìŠ¤ í…ŒìŠ¤íŠ¸ ì¤€ë¹„ ì™„ë£Œ', 'success');
  </script>
</body>
</html>