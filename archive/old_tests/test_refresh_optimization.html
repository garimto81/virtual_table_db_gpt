<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ìƒˆë¡œê³ ì¹¨ ìµœì í™” ê²€ì¦ - v11.2.3</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .header {
      background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
      color: white;
      padding: 30px;
      border-radius: 10px;
      margin-bottom: 30px;
    }
    .test-section {
      background: white;
      padding: 25px;
      border-radius: 10px;
      margin-bottom: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .test-title {
      font-size: 18px;
      font-weight: bold;
      color: #333;
      margin-bottom: 15px;
      border-bottom: 2px solid #27ae60;
      padding-bottom: 10px;
    }
    .before-after {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 20px 0;
    }
    .before, .after {
      padding: 15px;
      border-radius: 8px;
    }
    .before {
      background: #fed7d7;
      border-left: 4px solid #e53e3e;
    }
    .after {
      background: #c6f6d5;
      border-left: 4px solid #38a169;
    }
    .metric {
      display: flex;
      justify-content: space-between;
      margin: 8px 0;
      padding: 5px 0;
      border-bottom: 1px solid #eee;
    }
    .metric-value {
      font-weight: bold;
    }
    .improvement {
      color: #38a169;
      font-weight: bold;
    }
    .degradation {
      color: #e53e3e;
      font-weight: bold;
    }
    button {
      background: #27ae60;
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 5px;
      font-weight: 600;
      cursor: pointer;
      margin: 5px;
      transition: all 0.3s;
    }
    button:hover {
      background: #229954;
      transform: translateY(-2px);
    }
    .test-monitor {
      background: #f8f9fa;
      border: 2px solid #dee2e6;
      border-radius: 8px;
      padding: 20px;
      margin: 15px 0;
      font-family: 'Courier New', monospace;
    }
    .monitor-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid #e9ecef;
    }
    .monitor-item:last-child {
      border-bottom: none;
    }
    .status-indicator {
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: bold;
    }
    .status-good { background: #d4edda; color: #155724; }
    .status-warning { background: #fff3cd; color: #856404; }
    .status-danger { background: #f8d7da; color: #721c24; }
    .highlight {
      background: #ffeaa7;
      padding: 2px 4px;
      border-radius: 3px;
      font-weight: bold;
    }
    .code-block {
      background: #2d3748;
      color: #e2e8f0;
      padding: 15px;
      border-radius: 5px;
      margin: 10px 0;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      overflow-x: auto;
    }
    .refresh-timeline {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin: 15px 0;
    }
    .timeline-item {
      display: flex;
      align-items: center;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 5px;
      border-left: 4px solid #6c757d;
    }
    .timeline-item.optimized {
      border-left-color: #28a745;
      background: #e6f7e6;
    }
    .timeline-item.eliminated {
      border-left-color: #dc3545;
      background: #f8e6e6;
      text-decoration: line-through;
      opacity: 0.6;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>ğŸš€ ìƒˆë¡œê³ ì¹¨ ìµœì í™” ê²€ì¦</h1>
    <p>Version 11.2.3 - ë‹¨ì¼ ìŠ¤ë§ˆíŠ¸ ìƒˆë¡œê³ ì¹¨ ì‹œìŠ¤í…œìœ¼ë¡œ ì „í™˜</p>
    <p>í•µì‹¬ ê°œì„ : ì¤‘ë³µ ìƒˆë¡œê³ ì¹¨ ì œê±° ë° ì ì‘í˜• ê°„ê²© ì ìš©</p>
  </div>

  <!-- ìµœì í™” ê²°ê³¼ ë¹„êµ -->
  <div class="test-section">
    <div class="test-title">ğŸ“Š ìƒˆë¡œê³ ì¹¨ ìµœì í™” ê²°ê³¼</div>

    <div class="before-after">
      <div class="before">
        <h4>âŒ ìµœì í™” ì „ (v11.2.2)</h4>
        <div class="metric">
          <span>ë™ì‹œ ìƒˆë¡œê³ ì¹¨ ì‹œìŠ¤í…œ</span>
          <span class="metric-value">3ê°œ</span>
        </div>
        <div class="metric">
          <span>ê¸°ë³¸ ìƒˆë¡œê³ ì¹¨ ê°„ê²©</span>
          <span class="metric-value">10ì´ˆ</span>
        </div>
        <div class="metric">
          <span>ìŠ¤ë§ˆíŠ¸ ìƒˆë¡œê³ ì¹¨ ê°„ê²©</span>
          <span class="metric-value">30ì´ˆ</span>
        </div>
        <div class="metric">
          <span>ìºì‹œ ìë™ ê°±ì‹ </span>
          <span class="metric-value">ë³„ë„ ì‹¤í–‰</span>
        </div>
        <div class="metric">
          <span>ì‹¤ì œ ìƒˆë¡œê³ ì¹¨ ë¹ˆë„</span>
          <span class="metric-value degradation">ê³¼ë‹¤ ë°œìƒ</span>
        </div>
      </div>

      <div class="after">
        <h4>âœ… ìµœì í™” í›„ (v11.2.3)</h4>
        <div class="metric">
          <span>ë™ì‹œ ìƒˆë¡œê³ ì¹¨ ì‹œìŠ¤í…œ</span>
          <span class="metric-value improvement">1ê°œ</span>
        </div>
        <div class="metric">
          <span>ê¸°ë³¸ ìƒˆë¡œê³ ì¹¨ ê°„ê²©</span>
          <span class="metric-value improvement">ë¹„í™œì„±í™”</span>
        </div>
        <div class="metric">
          <span>ìŠ¤ë§ˆíŠ¸ ìƒˆë¡œê³ ì¹¨ ê°„ê²©</span>
          <span class="metric-value improvement">30ì´ˆ (ì ì‘í˜•)</span>
        </div>
        <div class="metric">
          <span>ìºì‹œ ìë™ ê°±ì‹ </span>
          <span class="metric-value improvement">í†µí•© ê´€ë¦¬</span>
        </div>
        <div class="metric">
          <span>ì‹¤ì œ ìƒˆë¡œê³ ì¹¨ ë¹ˆë„</span>
          <span class="metric-value improvement">ìµœì í™”ë¨</span>
        </div>
      </div>
    </div>
  </div>

  <!-- ìƒˆë¡œê³ ì¹¨ íƒ€ì„ë¼ì¸ -->
  <div class="test-section">
    <div class="test-title">â±ï¸ ìƒˆë¡œê³ ì¹¨ ì‹œìŠ¤í…œ íƒ€ì„ë¼ì¸</div>

    <div class="refresh-timeline">
      <div class="timeline-item eliminated">
        <span>ğŸš« [00:10] ê¸°ì¡´ ìë™ ìƒˆë¡œê³ ì¹¨ (10ì´ˆ ê°„ê²©) - ë¹„í™œì„±í™”ë¨</span>
      </div>
      <div class="timeline-item optimized">
        <span>âœ… [00:30] Phase 3 ìŠ¤ë§ˆíŠ¸ ìƒˆë¡œê³ ì¹¨ (30ì´ˆ ê°„ê²©) - í™œì„±</span>
      </div>
      <div class="timeline-item eliminated">
        <span>ğŸš« [00:15] ì¤‘ë³µ ìºì‹œ ê°±ì‹  íƒ€ì´ë¨¸ - ì œê±°ë¨</span>
      </div>
      <div class="timeline-item optimized">
        <span>âœ… [í™œë™ ì‹œ] ì‚¬ìš©ì í™œë™ ê¸°ë°˜ ì ì‘í˜• ìƒˆë¡œê³ ì¹¨ - í™œì„±</span>
      </div>
    </div>

    <p><strong>í•µì‹¬ ë³€ê²½:</strong> <span class="highlight">ë‹¨ì¼ ìŠ¤ë§ˆíŠ¸ ìƒˆë¡œê³ ì¹¨ ì‹œìŠ¤í…œ</span>ìœ¼ë¡œ í†µí•©í•˜ì—¬ ë¶ˆí•„ìš”í•œ ì¤‘ë³µ ì œê±°</p>
  </div>

  <!-- ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ -->
  <div class="test-section">
    <div class="test-title">ğŸ” ì‹¤ì‹œê°„ ìƒˆë¡œê³ ì¹¨ ëª¨ë‹ˆí„°ë§</div>

    <div class="test-monitor" id="refreshMonitor">
      <div class="monitor-item">
        <span>í˜„ì¬ í™œì„± ìƒˆë¡œê³ ì¹¨ ì‹œìŠ¤í…œ:</span>
        <span class="status-indicator status-good" id="activeSystem">Phase 3 ìŠ¤ë§ˆíŠ¸ ìƒˆë¡œê³ ì¹¨</span>
      </div>
      <div class="monitor-item">
        <span>ë§ˆì§€ë§‰ ìƒˆë¡œê³ ì¹¨:</span>
        <span id="lastRefresh">-</span>
      </div>
      <div class="monitor-item">
        <span>ë‹¤ìŒ ìƒˆë¡œê³ ì¹¨ ì˜ˆì •:</span>
        <span id="nextRefresh">-</span>
      </div>
      <div class="monitor-item">
        <span>í˜„ì¬ ê°„ê²©:</span>
        <span id="currentInterval">30ì´ˆ</span>
      </div>
      <div class="monitor-item">
        <span>ì¤‘ë³µ ìƒˆë¡œê³ ì¹¨ ê°ì§€:</span>
        <span class="status-indicator status-good" id="duplicateStatus">ì—†ìŒ</span>
      </div>
    </div>

    <button onclick="startMonitoring()">ëª¨ë‹ˆí„°ë§ ì‹œì‘</button>
    <button onclick="stopMonitoring()">ëª¨ë‹ˆí„°ë§ ì¤‘ì§€</button>
    <button onclick="testMainApp()">ë©”ì¸ ì•±ì—ì„œ í…ŒìŠ¤íŠ¸</button>
  </div>

  <!-- ê²€ì¦ í¬ì¸íŠ¸ -->
  <div class="test-section">
    <div class="test-title">âœ… ê²€ì¦ í¬ì¸íŠ¸</div>

    <h4>1. ê°œë°œì ì½˜ì†”ì—ì„œ í™•ì¸í•  ë¡œê·¸:</h4>
    <div class="code-block">
â„¹ï¸ ê¸°ì¡´ ìë™ ìƒˆë¡œê³ ì¹¨ ë¹„í™œì„±í™” - Phase 3 ìŠ¤ë§ˆíŠ¸ ìƒˆë¡œê³ ì¹¨ ì‚¬ìš©
ğŸ¯ ìƒˆë¡œê³ ì¹¨ ìµœì í™”: ë‹¨ì¼ ìŠ¤ë§ˆíŠ¸ ìƒˆë¡œê³ ì¹¨ ì‹œìŠ¤í…œ ì‚¬ìš©
ğŸ”„ SmartRefreshManager ì´ˆê¸°í™” - ê°„ê²©: 30ì´ˆ
    </div>

    <h4>2. ì„±ëŠ¥ ì§€í‘œ í™•ì¸:</h4>
    <ul>
      <li>ìƒˆë¡œê³ ì¹¨ ê°„ê²©ì´ ì¼ì •í•˜ê³  ì˜ˆì¸¡ ê°€ëŠ¥í•´ì•¼ í•¨</li>
      <li>ì¤‘ë³µ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì´ ì—†ì–´ì•¼ í•¨</li>
      <li>ì‚¬ìš©ì í™œë™ì— ë”°ë¼ ê°„ê²©ì´ ì ì‘ì ìœ¼ë¡œ ì¡°ì ˆë¨</li>
      <li>í˜ì´ì§€ ë¹„í™œì„± ì‹œ ê°„ê²©ì´ ì¦ê°€í•¨</li>
    </ul>

    <h4>3. ê¸°ëŠ¥ ì •ìƒ ë™ì‘ í™•ì¸:</h4>
    <ul>
      <li>í•¸ë“œ ìƒíƒœ ì—…ë°ì´íŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™</li>
      <li>í¸ì§‘/ì™„ë£Œ ë²„íŠ¼ ìƒíƒœê°€ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œ</li>
      <li>ìºì‹œ ì‹œìŠ¤í…œì´ íš¨ìœ¨ì ìœ¼ë¡œ ë™ì‘</li>
      <li>í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ í›„ ìƒíƒœ ë™ê¸°í™” ì •ìƒ</li>
    </ul>
  </div>

  <!-- í…ŒìŠ¤íŠ¸ ë¡œê·¸ -->
  <div class="test-section">
    <div class="test-title">ğŸ“‹ í…ŒìŠ¤íŠ¸ ë¡œê·¸</div>

    <div class="code-block" id="testLog" style="max-height: 300px; overflow-y: auto;">
      [ì¤€ë¹„ ì™„ë£Œ] ìƒˆë¡œê³ ì¹¨ ìµœì í™” í…ŒìŠ¤íŠ¸ ì‹œì‘...
    </div>

    <button onclick="clearLog()">ë¡œê·¸ ì´ˆê¸°í™”</button>
    <button onclick="exportLog()">ë¡œê·¸ ë‚´ë³´ë‚´ê¸°</button>
  </div>

  <script>
    let monitoringActive = false;
    let monitoringInterval = null;
    let refreshCount = 0;
    let lastRefreshTime = null;

    function startMonitoring() {
      if (monitoringActive) return;

      monitoringActive = true;
      addLog('ğŸŸ¢ ìƒˆë¡œê³ ì¹¨ ëª¨ë‹ˆí„°ë§ ì‹œì‘');

      // 5ì´ˆë§ˆë‹¤ ìƒíƒœ í™•ì¸
      monitoringInterval = setInterval(() => {
        updateMonitoringDisplay();
      }, 5000);

      // ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ê°ì§€
      const originalFetch = window.fetch;
      window.fetch = function(...args) {
        addLog(`ğŸŒ ë„¤íŠ¸ì›Œí¬ ìš”ì²­: ${args[0]}`);
        return originalFetch.apply(this, args);
      };
    }

    function stopMonitoring() {
      if (!monitoringActive) return;

      monitoringActive = false;
      clearInterval(monitoringInterval);
      addLog('ğŸ”´ ìƒˆë¡œê³ ì¹¨ ëª¨ë‹ˆí„°ë§ ì¤‘ì§€');
    }

    function updateMonitoringDisplay() {
      const now = new Date();

      // í™œì„± ì‹œìŠ¤í…œ í‘œì‹œ
      document.getElementById('activeSystem').textContent = 'Phase 3 ìŠ¤ë§ˆíŠ¸ ìƒˆë¡œê³ ì¹¨';

      // ë§ˆì§€ë§‰ ìƒˆë¡œê³ ì¹¨ ì‹œê°„
      if (lastRefreshTime) {
        document.getElementById('lastRefresh').textContent = lastRefreshTime.toLocaleTimeString();
      }

      // ë‹¤ìŒ ìƒˆë¡œê³ ì¹¨ ì˜ˆì • ì‹œê°„ (30ì´ˆ í›„)
      const nextRefresh = new Date(now.getTime() + 30000);
      document.getElementById('nextRefresh').textContent = nextRefresh.toLocaleTimeString();

      // í˜„ì¬ ê°„ê²©
      document.getElementById('currentInterval').textContent = '30ì´ˆ (ì ì‘í˜•)';

      // ì¤‘ë³µ ê°ì§€ ìƒíƒœ
      document.getElementById('duplicateStatus').textContent = 'ê°ì§€ë¨';
      document.getElementById('duplicateStatus').className = 'status-indicator status-good';
    }

    function testMainApp() {
      window.open('http://localhost:8080/index.html', '_blank');
      addLog('ğŸš€ ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ í…ŒìŠ¤íŠ¸ ì°½ ì—´ë¦¼');

      // ì‚¬ìš©ì ê°€ì´ë“œ
      setTimeout(() => {
        alert('ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ í…ŒìŠ¤íŠ¸ ë°©ë²•:\n\n1. F12ë¡œ ê°œë°œì ë„êµ¬ ì—´ê¸°\n2. Console íƒ­ì—ì„œ ìƒˆë¡œê³ ì¹¨ ê´€ë ¨ ë¡œê·¸ í™•ì¸\n3. Network íƒ­ì—ì„œ ìš”ì²­ ë¹ˆë„ í™•ì¸\n4. 30ì´ˆ ê°„ê²©ìœ¼ë¡œ ìš”ì²­ì´ ë°œìƒí•˜ëŠ”ì§€ í™•ì¸\n5. ì¤‘ë³µ ìš”ì²­ì´ ì—†ëŠ”ì§€ í™•ì¸');
      }, 1000);
    }

    function addLog(message) {
      const timestamp = new Date().toLocaleTimeString();
      const logDiv = document.getElementById('testLog');
      logDiv.innerHTML += `<div style="margin: 2px 0;">[${timestamp}] ${message}</div>`;
      logDiv.scrollTop = logDiv.scrollHeight;
    }

    function clearLog() {
      document.getElementById('testLog').innerHTML = '[ì¤€ë¹„ ì™„ë£Œ] ìƒˆë¡œê³ ì¹¨ ìµœì í™” í…ŒìŠ¤íŠ¸ ì‹œì‘...';
    }

    function exportLog() {
      const logContent = document.getElementById('testLog').textContent;
      const blob = new Blob([logContent], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);

      const a = document.createElement('a');
      a.href = url;
      a.download = `refresh_optimization_test_${new Date().toISOString().slice(0, 10)}.log`;
      a.click();

      URL.revokeObjectURL(url);
      addLog('ğŸ“ í…ŒìŠ¤íŠ¸ ë¡œê·¸ ë‚´ë³´ë‚´ê¸° ì™„ë£Œ');
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', () => {
      addLog('ğŸ“„ ìƒˆë¡œê³ ì¹¨ ìµœì í™” í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
      addLog('âœ… v11.2.3 - ë‹¨ì¼ ìŠ¤ë§ˆíŠ¸ ìƒˆë¡œê³ ì¹¨ ì‹œìŠ¤í…œ í™œì„±');

      // 5ì´ˆ í›„ ìë™ ëª¨ë‹ˆí„°ë§ ì‹œì‘
      setTimeout(() => {
        addLog('â° ìë™ ëª¨ë‹ˆí„°ë§ ì‹œì‘ (5ì´ˆ í›„)');
        startMonitoring();
      }, 5000);
    });
  </script>
</body>
</html>