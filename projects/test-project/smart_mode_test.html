<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Mode Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .success { color: #2ecc71; font-weight: bold; }
        .error { color: #e74c3c; font-weight: bold; }
        .test-item { margin: 10px 0; padding: 10px; background: white; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>ìŠ¤ë§ˆíŠ¸ ëª¨ë“œ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</h1>
    <div id="testResults"></div>

    <script>
        function runTests() {
            const results = [];
            
            // Test 1: SmartUIDetector í´ë˜ìŠ¤ ì •ì˜ í…ŒìŠ¤íŠ¸
            try {
                class SmartUIDetector {
                    constructor(video, canvas) {
                        this.video = video;
                        this.canvas = canvas;
                        this.isDetecting = false;
                    }
                    
                    startDetection() {
                        this.isDetecting = true;
                        return "ê°ì§€ ì‹œì‘ë¨";
                    }
                    
                    stopDetection() {
                        this.isDetecting = false;
                        return "ê°ì§€ ì¤‘ì§€ë¨";
                    }
                    
                    analyzeFrame() {
                        return "í”„ë ˆì„ ë¶„ì„ ì™„ë£Œ";
                    }
                }
                
                const testVideo = document.createElement('video');
                const testCanvas = document.createElement('canvas');
                const detector = new SmartUIDetector(testVideo, testCanvas);
                
                results.push('<div class="test-item success">âœ“ SmartUIDetector í´ë˜ìŠ¤ ì •ìƒ ì‘ë™</div>');
                results.push('<div class="test-item success">âœ“ ê°ì§€ ì‹œì‘: ' + detector.startDetection() + '</div>');
                results.push('<div class="test-item success">âœ“ ê°ì§€ ì¤‘ì§€: ' + detector.stopDetection() + '</div>');
                results.push('<div class="test-item success">âœ“ í”„ë ˆì„ ë¶„ì„: ' + detector.analyzeFrame() + '</div>');
                
            } catch (e) {
                results.push('<div class="test-item error">âœ— SmartUIDetector í´ë˜ìŠ¤ ì˜¤ë¥˜: ' + e.message + '</div>');
            }
            
            // Test 2: ìŠ¤ë§ˆíŠ¸ ëª¨ë“œ í•¨ìˆ˜ë“¤ í…ŒìŠ¤íŠ¸
            try {
                function toggleSmartDetection() {
                    return "ìŠ¤ë§ˆíŠ¸ ê°ì§€ í† ê¸€ ì™„ë£Œ";
                }
                
                function updateSmartStatus(message) {
                    return "ìƒíƒœ ì—…ë°ì´íŠ¸: " + message;
                }
                
                function formatTime(seconds) {
                    const mins = Math.floor(seconds / 60);
                    const secs = Math.floor(seconds % 60);
                    return mins + ':' + secs.toString().padStart(2, '0');
                }
                
                results.push('<div class="test-item success">âœ“ toggleSmartDetection: ' + toggleSmartDetection() + '</div>');
                results.push('<div class="test-item success">âœ“ updateSmartStatus: ' + updateSmartStatus("í…ŒìŠ¤íŠ¸") + '</div>');
                results.push('<div class="test-item success">âœ“ formatTime: ' + formatTime(125) + ' (125ì´ˆë¥¼ 2:05ë¡œ ë³€í™˜)</div>');
                
            } catch (e) {
                results.push('<div class="test-item error">âœ— ìŠ¤ë§ˆíŠ¸ ëª¨ë“œ í•¨ìˆ˜ ì˜¤ë¥˜: ' + e.message + '</div>');
            }
            
            // Test 3: HTML ìš”ì†Œ ìƒì„± í…ŒìŠ¤íŠ¸
            try {
                const testContainer = document.createElement('div');
                testContainer.innerHTML = 
                    '<h3>ğŸ§  ìŠ¤ë§ˆíŠ¸ UI ê°ì§€ ëª¨ë“œ</h3>' +
                    '<button id="smartDetectBtn">ğŸ” UI ê°ì§€ ì‹œì‘</button>' +
                    '<div id="smart-cell-0">ì¢Œìƒë‹¨<br><span id="smart-score-0">0%</span></div>';
                
                if (testContainer.querySelector('#smartDetectBtn') && 
                    testContainer.querySelector('#smart-cell-0') &&
                    testContainer.querySelector('#smart-score-0')) {
                    results.push('<div class="test-item success">âœ“ HTML ì¸í„°í˜ì´ìŠ¤ ìš”ì†Œ ìƒì„± ì„±ê³µ</div>');
                } else {
                    results.push('<div class="test-item error">âœ— HTML ì¸í„°í˜ì´ìŠ¤ ìš”ì†Œ ìƒì„± ì‹¤íŒ¨</div>');
                }
                
            } catch (e) {
                results.push('<div class="test-item error">âœ— HTML ì¸í„°í˜ì´ìŠ¤ ìƒì„± ì˜¤ë¥˜: ' + e.message + '</div>');
            }
            
            // ê²°ê³¼ í‘œì‹œ
            document.getElementById('testResults').innerHTML = results.join('');
            
            const successCount = (results.join('').match(/class="test-item success"/g) || []).length;
            const totalTests = results.length;
            
            const summary = document.createElement('div');
            summary.style.marginTop = '20px';
            summary.style.padding = '15px';
            summary.style.background = successCount === totalTests ? '#d4edda' : '#f8d7da';
            summary.style.borderRadius = '5px';
            summary.innerHTML = `<h3>í…ŒìŠ¤íŠ¸ ê²°ê³¼: ${successCount}/${totalTests} í†µê³¼</h3>` +
                (successCount === totalTests ? 
                    '<p class="success">ëª¨ë“  ìŠ¤ë§ˆíŠ¸ ëª¨ë“œ ê¸°ëŠ¥ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤!</p>' :
                    '<p class="error">ì¼ë¶€ ê¸°ëŠ¥ì— ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.</p>');
            
            document.getElementById('testResults').appendChild(summary);
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        window.addEventListener('load', runTests);
    </script>
</body>
</html>